generator client {
  provider      = "prisma-client-js"
  output        = "./generated/client"
  // binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
  directUrl = env("DB_DIRECT")
}

model User {
  id           Int       @id @default(autoincrement())
  first_name   String
  last_name    String
  email        String
  password     String
  phone_number String?
  city         String?
  is_verified  Boolean
  certificates ListCertificate[]
  disabilities ListDisability[]
  jobApplications JobApplication[]
  skills       ListSkill[]
}

model Company {
  id               Int               @id @default(autoincrement())
  name             String
  city             String
  about            String
  logo             String?
  picture          String?
  email            String
  password         String
  jobApplications  JobApplication[]
  jobs             Job[]
}
model ListCertificate {
  id          Int       @id @default(autoincrement())
  name        String?
  description String?
  user        User      @relation(fields: [user_id], references: [id])
  user_id     Int
}

model Skill {
  id   Int    @id @default(autoincrement())
  name String
  users ListSkill[]
  jobs ListJobSkill[]
}

model ListDisability {
  id            Int         @id @default(autoincrement())
  user          User        @relation(fields: [user_id], references: [id])
  user_id       Int
  disability    Disability  @relation(fields: [disability_id], references: [id])
  disability_id Int
}

model JobApplication {
  id         Int       @id @default(autoincrement())
  user       User      @relation(fields: [user_id], references: [id])
  user_id    Int
  job        Job       @relation(fields: [job_id], references: [id])
  job_id     Int
  company    Company   @relation(fields: [company_id], references: [id])
  company_id Int
  status     String
}

model Disability {
  id          Int         @id @default(autoincrement())
  category    Category    @relation(fields: [category_id], references: [id])
  category_id Int
  name        String
  description String
  users       ListDisability[]
}

model Ability {
  id   Int    @id @default(autoincrement())
  name String
  jobs Job[]
}

model ListSkill {
  id       Int    @id @default(autoincrement())
  user     User   @relation(fields: [user_id], references: [id])
  user_id  Int
  skill    Skill  @relation(fields: [skill_id], references: [id])
  skill_id Int
}


model Category {
  id    Int    @id @default(autoincrement())
  name  String
  disabilities Disability[]
}

model ListJobSkill {
  id       Int    @id @default(autoincrement())
  job      Job    @relation(fields: [job_id], references: [id])
  job_id   Int
  skill    Skill  @relation(fields: [skill_id], references: [id])
  skill_id Int
}

model Job {
  id               Int               @id @default(autoincrement())
  company          Company           @relation(fields: [company_id], references: [id])
  company_id       Int
  ability          Ability?          @relation(fields: [ability_id], references: [id])
  ability_id       Int?
  title            String
  description      String
  employment_type  String
  estimate_salary  Int?
  applications     JobApplication[]
  skills           ListJobSkill[]
}
